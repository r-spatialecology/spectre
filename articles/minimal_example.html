<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Minimal example • spectre</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Minimal example">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">spectre</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-gears"></span> Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/getting_started_with_spectre.html"><span class="fa fa-magic"></span> Get Started</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/minimal_example.html"><span class="fa fa-graduation-cap"></span> Minimal example</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-more" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-plus-square"></span> More</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-more">
<li><a class="dropdown-item" href="../articles/benchmark.html"><span class="fa fa-clock"></span> Benchmark</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-spatialecology/spectre/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../mailto:simpkinscraig063@gmail.com"><span class="fa fa-user"></span> Contact</a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Minimal example</h1>
                        <h4 data-toc-skip class="author">C.E. Simpkins,
S. Hanss, M. Hesselbarth, M.C. Spangenberg, J. Salecker and K.
Wiegand</h4>
            
            <h4 data-toc-skip class="date">2025-02-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-spatialecology/spectre/blob/main/vignettes/minimal_example.Rmd" class="external-link"><code>vignettes/minimal_example.Rmd</code></a></small>
      <div class="d-none name"><code>minimal_example.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>Install the release version from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"spectre"</span><span class="op">)</span></span></code></pre></div>
<p>To install the developmental version of <code>spectre</code>,
use:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"r-spatialecology/spectre"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/r-spatialecology/spectre/" class="external-link">"spectre"</a></span><span class="op">)</span></span></code></pre></div>
<p>For this example, we created a random species composition (15 sites,
gamma diversity = 20) and calculated
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>-diversity
and Bray-Curtis dissimilarity to be used as input for the
<code>spectre</code> algorithm (please see
<code>R/generate_minimal_example_data.R</code> for details).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load "observed" alpha-, beta- and gamma-diversity values of the random species composition</span></span>
<span><span class="va">alpha_list</span> <span class="op">&lt;-</span> <span class="va">minimal_example_data</span><span class="op">$</span><span class="va">alpha_list</span> <span class="co"># richness</span></span>
<span><span class="va">beta_list</span> <span class="op">&lt;-</span> <span class="va">minimal_example_data</span><span class="op">$</span><span class="va">beta_list</span> <span class="co"># Bray-Curtis dissimilarity</span></span>
<span><span class="va">total_gamma</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">minimal_example_data</span><span class="op">$</span><span class="va">species_list</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co"># 20 species</span></span></code></pre></div>
<div class="section level3">
<h3 id="solve-species-composition-using-spectre">Solve species composition using <code>spectre</code><a class="anchor" aria-label="anchor" href="#solve-species-composition-using-spectre"></a>
</h3>
<p>Running the optimization is straightforward in <code>spectre</code>
and only includes one function call. However, first we need to generate
to commonness matrix from the <code>gdm</code> predictions to generate
the object matrix. Then, we simply run the optimization using the alpha
list, the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">gamma</annotation></semantics></math>-diversity,
the objective matrix (or target), and finally the number of maximum
iterations.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/r-spatialecology/spectre/" class="external-link">"spectre"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">objective_matrix</span> <span class="op">&lt;-</span> <span class="fu">spectre</span><span class="fu">::</span><span class="fu"><a href="../reference/generate_commonness_matrix_from_gdm.html">generate_commonness_matrix_from_gdm</a></span><span class="op">(</span>gdm_predictions <span class="op">=</span> <span class="va">beta_list</span>, </span>
<span>                                                                 alpha_list <span class="op">=</span> <span class="va">alpha_list</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Solve composition </span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">spectre</span><span class="fu">::</span><span class="fu"><a href="../reference/run_optimization_min_conf.html">run_optimization_min_conf</a></span><span class="op">(</span>alpha_list <span class="op">=</span> <span class="va">alpha_list</span>,</span>
<span>                                          total_gamma <span class="op">=</span> <span class="va">total_gamma</span>,</span>
<span>                                          target <span class="op">=</span> <span class="va">objective_matrix</span>,</span>
<span>                                          max_iterations <span class="op">=</span> <span class="fl">1000</span>, <span class="co"># n iterations</span></span>
<span>                                          seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span> <span class="co"># use a random seed for reproducibility</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  &gt; Optimization finished with lowest absolute error = 11 (highest absolute error was: 102 improved by: 91)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="result-evaluation">Result evaluation<a class="anchor" aria-label="anchor" href="#result-evaluation"></a>
</h3>
<p><code>spectre</code> allows to easily calculate some error measures,
namely the mean absolute commonness error
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>A</mi><msub><mi>E</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">MAE_c</annotation></semantics></math>)
and the relative commonness error [%] (RCE). The error is calculated
between the solved species composition and the objective matrix.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">error_c</span> <span class="op">&lt;-</span> <span class="fu">spectre</span><span class="fu">::</span><span class="fu"><a href="../reference/calc_commonness_error.html">calc_commonness_error</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">res</span>, objective_matrix <span class="op">=</span> <span class="va">objective_matrix</span><span class="op">)</span></span></code></pre></div>
<p>The <em>objective matrix</em> had a mean commonness of 1.75. The mean
absolute error between the <em>objective matrix</em> and the solved
<em>solution matrix</em> was 0.1. The solution matrix had an relative
commonness error (RCE) of 6 %.</p>
<p>There are also two functions to visualize the optimization. First you
can plot the error of the solution matrix over time. Second, you can
plot the commonness error between the solution matrix and the objective
matrix.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># With an increasing number of iterations, the solution matrix improved</span></span>
<span><span class="fu">spectre</span><span class="fu">::</span><span class="fu"><a href="../reference/plot_error.html">plot_error</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">res</span><span class="op">)</span></span></code></pre></div>
<p><img src="minimal_example_files/figure-html/unnamed-chunk-8-1.png" width="50%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Plot commonness error between objective matrix and solution matrix</span></span>
<span><span class="fu">spectre</span><span class="fu">::</span><span class="fu"><a href="../reference/plot_commonness.html">plot_commonness</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">res</span>, target <span class="op">=</span> <span class="va">objective_matrix</span><span class="op">)</span></span></code></pre></div>
<p><img src="minimal_example_files/figure-html/unnamed-chunk-8-2.png" width="50%" style="display: block; margin: auto;"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Craig Simpkins, Sebastian Hanss, Maximilian Hesselbarth, Matthias Spangenberg, Jan Salecker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
