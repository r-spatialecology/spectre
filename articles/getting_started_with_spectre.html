<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting started with `spectre` • spectre</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with `spectre`">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">spectre</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-gears"></span> Functions</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/getting_started_with_spectre.html"><span class="fa fa-magic"></span> Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/minimal_example.html"><span class="fa fa-graduation-cap"></span> Minimal example</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-more" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-plus-square"></span> More</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-more">
<li><a class="dropdown-item" href="../articles/benchmark.html"><span class="fa fa-clock"></span> Benchmark</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-spatialecology/spectre/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../mailto:simpkinscraig063@gmail.com"><span class="fa fa-user"></span> Contact</a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting started with `spectre`</h1>
                        <h4 data-toc-skip class="author">C.E. Simpkins,
S. Hanss, M. Hesselbarth, M.C. Spangenberg, J. Salecker and K.
Wiegand</h4>
            
            <h4 data-toc-skip class="date">2025-02-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-spatialecology/spectre/blob/main/vignettes/getting_started_with_spectre.Rmd" class="external-link"><code>vignettes/getting_started_with_spectre.Rmd</code></a></small>
      <div class="d-none name"><code>getting_started_with_spectre.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="general-background">General background<a class="anchor" aria-label="anchor" href="#general-background"></a>
</h2>
<p><code>spectre</code> is an <code>R</code> package which easily
implements an advanced optimization algorithm capable of predicting
regional community composition at fine spatial resolutions using only
sparse biological and environmental data. The algorithm underlying
<code>spectre</code> utilizes estimates of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>-diversity
(i.e. species richness) and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>β</mi><annotation encoding="application/x-tex">\beta</annotation></semantics></math>-diversity
(i.e. species dissimilarity) to come up with community composition
estimates for all patches within a target region. The method used in
<code>spectre</code> is an adapted version of that presented by Mokany
et al. (2011).</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the release version from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"spectre"</span><span class="op">)</span></span></code></pre></div>
<p>To install the developmental version of <code>spectre</code>,
use:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"r-spatialecology/spectre"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="use-case-example">Use case example<a class="anchor" aria-label="anchor" href="#use-case-example"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatialecology/spectre/" class="external-link">spectre</a></span><span class="op">)</span></span></code></pre></div>
<p>This example acts as a minimal working case and uses simple
“simulated” data matching the structure of that needed by the relevant
functions. This simple example is used to minimize the time and data
storage requirements needed to run this vignette.</p>
<div class="section level3">
<h3 id="generating-input-data">Generating input data<a class="anchor" aria-label="anchor" href="#generating-input-data"></a>
</h3>
<p>The first step in using the <code>spectre</code> package is to gather
estimates for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>-biodiversity
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>β</mi><annotation encoding="application/x-tex">\beta</annotation></semantics></math>-biodiversity
(in the form of Bray-Curtis dissimilarity) for the area of interest at
the desired outcome resolution.</p>
<p>For this example, we created a random species composition (15 sites,
gamma diversity = 20) and calculated i) an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>-diversity
estimate and ii) a Bray-Curtis dissimilarity estimate in the output
format of the <code>gdm</code> package (Fitzpatrick et al. 2021). Both
are used as input for the <code>spectre</code> algorithm, please see
<code>R/generate_minimal_example_data.R</code> for details.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load "observed" alpha-, beta- and gamma-diversity values of the random species composition</span></span>
<span><span class="va">alpha_list</span> <span class="op">&lt;-</span> <span class="va">minimal_example_data</span><span class="op">$</span><span class="va">alpha_list</span> <span class="co"># richness</span></span>
<span><span class="va">beta_list</span> <span class="op">&lt;-</span> <span class="va">minimal_example_data</span><span class="op">$</span><span class="va">beta_list</span> <span class="co"># Bray-Curtis dissimilarity</span></span>
<span><span class="va">total_gamma</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">minimal_example_data</span><span class="op">$</span><span class="va">species_list</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co"># 20 species</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="running-the-optimization">Running the optimization<a class="anchor" aria-label="anchor" href="#running-the-optimization"></a>
</h3>
<p>We use the input estimates
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>-diversity
and Bray-Curtis dissimilarity) to generate a commonness matrix
(i.e. species in common between each site by site pair) using the
<code><a href="../reference/generate_commonness_matrix_from_gdm.html">generate_commonness_matrix_from_gdm()</a></code> function. This
commonness matrix acts as the objective function (i.e. target) for the
optimization algorithm.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate objective_matrix from (modelled) alpha-diversity and Bray-Curtis dissimilarity</span></span>
<span></span>
<span><span class="va">objective_matrix</span> <span class="op">&lt;-</span> <span class="fu">spectre</span><span class="fu">::</span><span class="fu"><a href="../reference/generate_commonness_matrix_from_gdm.html">generate_commonness_matrix_from_gdm</a></span><span class="op">(</span></span>
<span>  gdm_predictions <span class="op">=</span> <span class="va">beta_list</span>, </span>
<span>  alpha_list <span class="op">=</span> <span class="va">alpha_list</span><span class="op">)</span></span></code></pre></div>
<p>Once the input estimates and objective function have been obtained
the optimization algorithm is straightforward in <code>spectre</code>,
requiring only one function call. Note though that the run time for this
function may be high especially for large landscapes with high species
diversity and if <code>max_iterations</code> is high.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">spectre</span><span class="fu">::</span><span class="fu"><a href="../reference/run_optimization_min_conf.html">run_optimization_min_conf</a></span><span class="op">(</span></span>
<span>  alpha_list <span class="op">=</span> <span class="va">alpha_list</span>,</span>
<span>  total_gamma <span class="op">=</span> <span class="va">total_gamma</span>,</span>
<span>  target <span class="op">=</span> <span class="va">objective_matrix</span>,</span>
<span>  max_iterations <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span> <span class="co"># n iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  &gt; Optimization finished with lowest absolute error = 9 (highest absolute error was: 102 improved by: 93)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="result-analysis">Result analysis<a class="anchor" aria-label="anchor" href="#result-analysis"></a>
</h3>
<p><code>spectre</code> incorporates functions to allow for easy
calculation of certain error metrics, namely the mean absolute
commonness error
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>A</mi><msub><mi>E</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">MAE_c</annotation></semantics></math>)
and the relative commonness error
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>%</mi><mi>R</mi><mi>C</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">\% RCE</annotation></semantics></math>).
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>A</mi><msub><mi>E</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">MAE_c</annotation></semantics></math>
is the mean of the absolute difference between the solved <em>solution
matrix</em> and the <em>objective function</em>, whereas
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>%</mi><mi>R</mi><mi>C</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">\% RCE</annotation></semantics></math>
is the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>A</mi><msub><mi>E</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">MAE_c</annotation></semantics></math>
over the absolute commonness from the <em>objective function</em>
represented as a percentage.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">error_c</span> <span class="op">&lt;-</span> <span class="fu">spectre</span><span class="fu">::</span><span class="fu"><a href="../reference/calc_commonness_error.html">calc_commonness_error</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">res</span>, objective_matrix <span class="op">=</span> <span class="va">objective_matrix</span><span class="op">)</span></span></code></pre></div>
<p>The <em>objective function</em> had a mean commonness of 1.75. The
mean absolute error between the <em>objective function</em> and the
solved <em>solution matrix</em> was 0.09. The solution matrix had an
relative commonness error (RCE) of 4.9%.</p>
<p>These results can be visualized in two ways using functions built
into the package. First, one can plot the error of the solved
<em>solution matrix</em> over time. Second, the commonness error between
the final solved <em>solution matrix</em> and the <em>objective
function</em> for each patch can be plotted</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># With an increasing number of iterations, the solution matrix improved</span></span>
<span><span class="fu">spectre</span><span class="fu">::</span><span class="fu"><a href="../reference/plot_error.html">plot_error</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">res</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting_started_with_spectre_files/figure-html/unnamed-chunk-9-1.png" width="50%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Plot commonness error between objective function and solution matrix</span></span>
<span><span class="fu">spectre</span><span class="fu">::</span><span class="fu"><a href="../reference/plot_commonness.html">plot_commonness</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">res</span>, target <span class="op">=</span> <span class="va">objective_matrix</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting_started_with_spectre_files/figure-html/unnamed-chunk-9-2.png" width="50%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Fitzpatrick, M.C., Mokany, K., Manion, G., Lisk, M., Ferrier, S.,
Nieto-Lugilde, D., 2021. gdm: Generalized Dissimilarity Modeling. R
package version 1.4.2.2. <a href="https://CRAN.R-project.org/package=gdm" class="external-link uri">https://CRAN.R-project.org/package=gdm</a></p>
<p>Mokany, K., Harwood, T.D., Overton, J.M.C., Barker, G.M., Ferrier,
S., 2011. Combining α - and β -diversity models to fill gaps in our
knowledge of biodiversity: Filling gaps in biodiversity knowledge.
Ecology Letters 14, 1043–1051. <a href="https://doi.org/10.1111/j.1461-0248.2011.01675.x" class="external-link uri">https://doi.org/10.1111/j.1461-0248.2011.01675.x</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Craig Simpkins, Sebastian Hanss, Maximilian Hesselbarth, Matthias Spangenberg, Jan Salecker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
