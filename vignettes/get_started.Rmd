---
title: "get_started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{get_started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# run_optimization_rnd_switch - the original version

Algorithm:
1. create a random solution
2. select a random site
3. switch a random present species to not present and a non-present species to present at this site
4. Undo 3. if solution is worse (some annealing noise may interfere)
5. goto 2. until max_runs or solution <= energy_threshold

```{r setup}
# library(spectre)
 species_grid <- run_optimization_rnd_switch(alpha_list = alpha_list,
                                  total_gamma = estimated_gamma,
                                  target = target_matrix,
                                  max_runs = 2500,
                                  energy_threshold = .1,
                                  patience = 500)
 
 plot_commonness(species_grid = species_grid, 
                 target = target_matrix)
 plot_energy(species_grid = species_grid)
```

# run_optimization_min_conf - minimum conflict

Algorithm:
1. create a random solution
2. select a random site
3. remove a random present species at the site
4. Try for each absent species at this site, how the enery changes it it was present. Save a list of species for which energy was lowest (= min conflict)
5. Set a random species from the min-conflict list as present.
6. goto 2. until max_runs or solution <= energy_threshold 

```{r setup_2}
# library(spectre)
 species_grid <- run_optimization_min_conf(alpha_list = alpha_list,
                                  total_gamma = estimated_gamma,
                                  target = target_matrix,
                                  max_runs = 500,
                                  energy_threshold = .1)
 
 plot_commonness(species_grid = species_grid, 
                 target = target_matrix)
 plot_energy(species_grid = species_grid)
```

# run_optimization_backtracking

Algorithm:
1. reset all sites (i.e. the first n species are present)
2. select the second site
3. check if the current site is consistent with the site before 
4a. if consistent && not all sites consistent: site = site + 1; go to 3.
4b. if not consistent: choose next species combination of the site; if there is one, go to 3.
5. if there is no next species combination of the site: reset site; site = site - 1; go to 4b (i.e. Backtrack)
6. stop if max_steps reached or solution found in 4a

```{r setup_3}
# library(spectre)
 species_grid <- run_optimization_min_conf(alpha_list = alpha_list,
                                  total_gamma = estimated_gamma,
                                  target = target_matrix,
                                  max_runs = 1000,
                                  energy_threshold = .1)
 
 plot_commonness(species_grid = species_grid, 
                 target = target_matrix)
 plot_energy(species_grid = species_grid)
```